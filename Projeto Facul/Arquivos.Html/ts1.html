<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FastWork - Conectando Profissionais</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />

    <link rel="stylesheet" href="Arquivos.Css/ts1.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="shortcut icon"
      href="Arquivos.Css/Imagens/Logo_FAVICON.png"
      type="image/x-icon"
    />

    <style>
      /* Override para melhorar o cabeçalho */
      .cabecalho {
        position: sticky !important;
        top: 0 !important;
        z-index: 1000 !important;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .cabecalho-container {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        padding: 1rem 2rem !important;
      }

      .fastwork {
        font-size: 1.8rem !important;
        font-weight: bold !important;
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        margin: 0 !important;
      }

      .fastwork img {
        height: 35px !important;
        width: auto !important;
      }

      .menu-hamburger {
        position: relative !important;
      }

      .hamburger-btn {
        position: fixed !important;
        top: 20px !important;
        right: 20px !important;
        width: 40px !important;
        height: 40px !important;
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        gap: 6px !important;
        z-index: 1001 !important;
        padding: 0 !important;
      }

      .hamburger-btn span {
        width: 30px !important;
        height: 3px !important;
        background-color: var(--primary-color, #1976d2) !important;
        transition: all 0.3s ease !important;
        border-radius: 3px !important;
      }

      /* Melhorar botões de cadastro/login */
      .botoes-cadastro {
        display: flex !important;
        flex-direction: column !important;
        gap: 20px !important;
        margin-top: 30px !important;
        width: 100% !important;
        max-width: 400px !important;
        margin-left: auto !important;
        margin-right: auto !important;
        padding: 0 20px !important;
      }

      .btn-cadastro {
        padding: 18px 40px !important;
        font-size: 1.2rem !important;
        font-weight: 700 !important;
        border-radius: 12px !important;
        border: 2px solid var(--border-color, #1976d2) !important;
        background: linear-gradient(
          135deg,
          var(--primary-color, #1976d2),
          var(--secondary-color, #000000)
        ) !important;
        color: white !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
        text-transform: uppercase !important;
        letter-spacing: 1px !important;
        min-height: 60px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        gap: 10px !important;
        width: 100% !important;
      }

      .btn-cadastro i {
        font-size: 1.3rem !important;
      }

      [data-theme="light"] .btn-cadastro {
        color: #000000 !important;
        background: linear-gradient(135deg, #ffc107, #ffb300) !important;
        border-color: #ffc107 !important;
        box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3) !important;
      }

      [data-theme="light"] .btn-cadastro:hover {
        background: linear-gradient(135deg, #ffb300, #ffc107) !important;
        color: #000000 !important;
        box-shadow: 0 6px 20px rgba(255, 193, 7, 0.4) !important;
      }

      .btn-cadastro:hover {
        transform: translateY(-3px) !important;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;
      }

      .btn-cadastro i {
        margin-right: 8px !important;
      }

      @media (max-width: 768px) {
        .fastwork {
          font-size: 1.3rem !important;
        }

        .fastwork img {
          height: 28px !important;
        }

        .botoes-cadastro {
          max-width: 100% !important;
          gap: 15px !important;
          padding: 0 15px !important;
          margin-top: 20px !important;
        }

        .btn-cadastro {
          font-size: 1rem !important;
          padding: 14px 25px !important;
          min-height: 50px !important;
        }

        .btn-cadastro i {
          font-size: 1.1rem !important;
        }

        .cabecalho-container {
          padding: 0.8rem 1rem !important;
        }
      }

      @media (min-width: 768px) {
        .botoes-cadastro {
          flex-direction: row !important;
          justify-content: center !important;
          flex-wrap: wrap !important;
        }

        .btn-cadastro {
          flex: 1 !important;
          min-width: 200px !important;
          max-width: 300px !important;
        }
      }
    </style>
  </head>

  <body>
    <header class="cabecalho">
      <div class="cabecalho-container">
        <h1 class="fastwork">
          <img
            src="Arquivos.Css/Imagens/Logo_FAVICON.png"
            alt="FastWork Logo"
          />
          FastWork
        </h1>
        <div class="cabecalho-direita">
          <!-- Nome do usuário logado -->
          <div
            id="userNameDisplay"
            style="
              display: none;
              margin-right: 20px;
              color: #1976d2;
              font-weight: 600;
              font-size: 16px;
            "
          >
            <i class="bi bi-person-circle" style="margin-right: 5px"></i>
            <span id="userName"></span>
          </div>

          <div class="menu-hamburger">
            <button class="hamburger-btn" onclick="toggleMenu()">
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
            </button>
            <div class="dropdown-menu" id="dropdownMenu">
              <a href="formu.html" target="_blank"
                ><i class="bi bi-person-circle"></i> Perfil</a
              >
              <a href="empregos.html"
                ><i class="bi bi-briefcase"></i> Empregos</a
              >
              <a href="sobre.html"><i class="bi bi-info-circle"></i> Sobre</a>
              <a href="ajuda.html"
                ><i class="bi bi-question-circle"></i> Ajuda</a
              >
              <button class="theme-toggle-menu" onclick="toggleTheme()">
                <i class="bi bi-moon-stars"></i>
                <span class="theme-text">Modo Claro</span>
              </button>
              <!-- Botão de logout se estiver logado -->
              <button
                id="logoutBtn"
                style="
                  display: none;
                  background: #d32f2f;
                  color: white;
                  border: none;
                  padding: 10px 20px;
                  border-radius: 8px;
                  cursor: pointer;
                  margin-top: 10px;
                  width: 100%;
                "
                onclick="logout()"
              >
                <i class="bi bi-box-arrow-right"></i> Sair
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="conteudo-principal">
      <section class="cadastro-empresa">
        <div class="imagens-empresa">
          <div class="imagem-empresa">
            <a href="cadastroem.html" target="_blank">
              <img
                src="https://tse3.mm.bing.net/th/id/OIP.n55Pyr_1rj8_Vbv8PAnLNwHaHa?cb=iwc2&rs=1&pid=ImgDetMain"
                alt="imgem decorativa"
              />
            </a>
          </div>
          <div class="botoes-cadastro">
            <button
              class="btn-cadastro"
              onclick="window.open('cadastroem.html', '_blank')"
            >
              <i class="bi bi-building"></i> Cadastrar Empresa
            </button>
            <button
              class="btn-cadastro"
              onclick="window.open('formu.html', '_blank')"
            >
              <i class="bi bi-person-plus"></i> Cadastrar Profissional
            </button>
            <button
              class="btn-cadastro"
              onclick="window.open('login.html', '_blank')"
            >
              <i class="bi bi-box-arrow-in-right"></i> Fazer Login
            </button>
          </div>
        </div>
      </section>

      <section class="destaque-servicos">
        <h2 class="titulo-servicos" id="servicosnice">Serviços disponíveis</h2>
      </section>

      <section class="galeria-servicos">
        <div class="servicos-container">
          <!-- Os serviços serão inseridos aqui via JavaScript -->
        </div>
      </section>

      <div class="dicas-de-carreira">
        <h1 id="dicasnice">Dicas De Carreira</h1>

        <div class="conteudo">
          <p>
            Para construir uma carreira sólida, conheça suas forças e paixões,
            invista em aprendizado contínuo e adapte-se às mudanças. Crie uma
            rede de contatos genuína, defina metas claras usando o método SMART
            e cuide da sua marca pessoal com um perfil atualizado e
            autenticidade. Pequenos passos, como cursos ou conversas, podem
            levar você longe. Além disso, busque mentores que possam orientá-lo
            e oferecer perspectivas valiosas com base em suas experiências.
            Participe de eventos e workshops da sua área para se manter
            atualizado e conhecer novas tendências. Esteja aberto a feedbacks,
            pois eles são essenciais para o crescimento profissional e pessoal.
            Avalie regularmente seu progresso, ajustando suas estratégias para
            alcançar seus objetivos de forma mais eficiente. Qual será seu
            próximo movimento?
          </p>
        </div>

        <div class="galeria-imagens">
          <div class="box">
            <div class="img-overlay">
              <img
                src="Arquivos.Css/Imagens/mulhertrabalho.jpeg"
                alt="img corporativa"
              />
              <div class="overlay">Networking é essencial!</div>
            </div>
            <div class="img-overlay apagar1 apaga2">
              <img
                class="none"
                src="Arquivos.Css/Imagens/imagem corporativa.jpg"
                alt="img corporativa"
              />
              <div class="overlay">Invista em aprendizado contínuo</div>
            </div>
            <div class="img-overlay apagar1 apagar2">
              <img
                class="none"
                src="Arquivos.Css/Imagens/imagem corporativa.png"
                alt="img corporativa"
              />
              <div class="overlay"><p>Defina metas claras</p></div>
            </div>
          </div>
        </div>
      </div>
      <div class="saiba-mais-container">
        <a href="sobre.html">
          <button class="saiba-mais-btn">Saiba Mais</button>
        </a>
      </div>
    </main>

    <footer class="rodape">
      <div class="rodape-container">
        <div class="rodape-coluna">
          <h3 class="rodape-titulo">FastWork</h3>
          <a href="sobre.html">Sobre</a>
          <a href="empregos.html">Empregos</a>
        </div>

        <div class="rodape-coluna">
          <h3 class="rodape-titulo">Comunidades</h3>
          <a href="Dev.html">Desenvolvedores</a>
          <a href="publicidade.html">Publicidade</a>
          <a href="investidores.html">Investidores</a>
          <a href="fornecedores.html">Fornecedores</a>
        </div>

        <div class="rodape-coluna">
          <h3 class="rodape-titulo">Links úteis</h3>
          <a href="ajuda.html">Suporte</a>
          <a href="legal.html">Legal</a>
          <a href="seguranca.html">Segurança e privacidade</a>
          <a href="politicas.html">Políticas de privacidade</a>
          <a href="cookies.html">Cookies</a>
          <a href="acessibilidade.html">Acessibilidade</a>
        </div>

        <div class="rodape-coluna">
          <h3 class="rodape-titulo">Redes sociais</h3>
          <div class="redes-sociais">
            <a href="https://www.instagram.com/fast_work2025.1/" target="_blank"
              ><img
                src="Arquivos.Css/Imagens/icons8-instagram-logo-500.png"
                alt="Instagram"
            /></a>
            <a href="https://x.com/home?lang=pt-br" target="_blank"
              ><img
                src="Arquivos.Css/Imagens/icons8-twitterx-500.png"
                alt="Twitter"
            /></a>
            <a
              href="https://web.facebook.com/UniFOA/?locale=pt_BR&_rdc=1&_rdr#"
              target="_blank"
              ><img
                src="Arquivos.Css/Imagens/icons8-facebook-novo-500.png"
                alt="Facebook"
            /></a>
          </div>
        </div>
      </div>

      <div class="rodape-creditos">
        <p>Português (Brasil)</p>
        <p>© 2025 FastWork. Todos os direitos reservados.</p>
      </div>
    </footer>

    <script>
      // Theme management - Consolidated logic to prevent conflicts
      let isThemeInitialized = false;

      function getStoredTheme() {
        return localStorage.getItem("theme") || "dark";
      }

      function setStoredTheme(theme) {
        localStorage.setItem("theme", theme);
      }

      function setTheme(theme) {
        // Prevent multiple theme applications during initialization
        if (
          document.documentElement.getAttribute("data-theme") === theme &&
          isThemeInitialized
        ) {
          return;
        }

        document.documentElement.setAttribute("data-theme", theme);

        // Update theme toggle elements safely
        const themeText = document.querySelector(".theme-text");

        if (themeText) {
          if (theme === "light") {
            themeText.textContent = "Modo Escuro";
          } else {
            themeText.textContent = "Modo Claro";
          }
        }

        isThemeInitialized = true;
      }

      function toggleTheme() {
        const currentTheme =
          document.documentElement.getAttribute("data-theme") || "dark";
        const newTheme = currentTheme === "light" ? "dark" : "light";

        setTheme(newTheme);
        setStoredTheme(newTheme);
      }

      // Menu hamburger functionality
      function toggleMenu() {
        const dropdownMenu = document.getElementById("dropdownMenu");
        const hamburgerBtn = document.querySelector(".hamburger-btn");

        dropdownMenu.classList.toggle("show");
        hamburgerBtn.classList.toggle("active");
      }

      // Close menu when clicking outside
      document.addEventListener("click", function (event) {
        const dropdownMenu = document.getElementById("dropdownMenu");
        const hamburgerBtn = document.querySelector(".hamburger-btn");

        if (
          !hamburgerBtn.contains(event.target) &&
          !dropdownMenu.contains(event.target)
        ) {
          dropdownMenu.classList.remove("show");
          hamburgerBtn.classList.remove("active");
        }
      });

      // Initialize theme immediately to prevent flashing
      (function initializeTheme() {
        const storedTheme = getStoredTheme();
        setTheme(storedTheme);
      })();

      // Re-apply theme after DOM content is loaded to ensure all elements are updated
      document.addEventListener("DOMContentLoaded", () => {
        const storedTheme = getStoredTheme();
        setTheme(storedTheme);
      });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sistema de APIs -->
    <script src="Arquivos.Js/APIs.js"></script>

    <script src="Arquivos.Js/ts1.js"></script>

    <script>
      // Integração com sistema de autenticação
      document.addEventListener("DOMContentLoaded", function () {
        // VERIFICAR SESSÃO DO USUÁRIO LOGADO
        checkUserSession();

        // Aguardar carregamento do sistema de APIs
        setTimeout(() => {
          if (typeof authSystem !== "undefined") {
            console.log("Sistema de autenticação carregado");

            // Adicionar elementos de perfil de usuário se logado
            if (authSystem.isAuthenticated()) {
              const user = authSystem.getCurrentUser();
              console.log("Usuário logado:", user);

              // Mostrar mensagem de boas-vindas
              setTimeout(() => {
                if (typeof UIUtils !== "undefined") {
                  UIUtils.showAlert(
                    `Bem-vindo(a), ${user.name}! Você está na página principal.`,
                    "success"
                  );
                }
              }, 500);

              // Adicionar informações do usuário no header
              adicionarPerfilUsuario(user);

              // Modificar botões de cadastro se usuário está logado
              modificarBotoesCadastro(user);
            }

            // APIs removidas da página principal
          }
        }, 1000);
      });

      // FUNÇÃO PARA VERIFICAR SESSÃO E MOSTRAR NOME DO USUÁRIO
      function checkUserSession() {
        try {
          // Tentar ler sessão do localStorage
          const sessionData = localStorage.getItem("fastwork_session");

          if (sessionData) {
            const session = JSON.parse(sessionData);
            console.log("Sessão completa encontrada:", session);

            // A sessão tem estrutura: {user: {...}, timestamp: ...}
            const userData = session.user || session;
            console.log("Dados do usuário:", userData);

            // Determinar o nome a exibir
            let displayName = "";
            if (userData.nome) {
              displayName = userData.nome; // Profissionais
            } else if (userData.nomeFantasia) {
              displayName = userData.nomeFantasia; // Empresas
            } else if (userData.name) {
              displayName = userData.name; // Fallback
            } else if (userData.email) {
              displayName = userData.email.split("@")[0]; // Usar parte do email como fallback
            } else {
              displayName = "Usuário"; // Fallback final
            }

            // Mostrar nome no header
            const userNameDisplay = document.getElementById("userNameDisplay");
            const userName = document.getElementById("userName");
            const logoutBtn = document.getElementById("logoutBtn");

            if (userNameDisplay && userName) {
              userName.textContent = displayName;
              userNameDisplay.style.display = "flex";
              userNameDisplay.style.alignItems = "center";
              console.log("✅ Nome exibido com sucesso:", displayName);
            } else {
              console.error("❌ Elementos não encontrados:", {
                userNameDisplay: !!userNameDisplay,
                userName: !!userName,
              });
            }

            // Mostrar botão de logout
            if (logoutBtn) {
              logoutBtn.style.display = "block";
            }
          } else {
            console.log("ℹ️ Nenhuma sessão encontrada");
          }
        } catch (error) {
          console.error("❌ Erro ao verificar sessão:", error);
        }
      }

      // FUNÇÃO DE LOGOUT
      function logout() {
        if (confirm("Deseja realmente sair?")) {
          // Limpar sessão
          localStorage.removeItem("fastwork_session");

          // Redirecionar para login
          alert("Você foi desconectado com sucesso!");
          window.location.href = "login.html";
        }
      }

      // Adicionar perfil do usuário no header
      function adicionarPerfilUsuario(user) {
        const headerRight = document.querySelector(".cabecalho-direita");
        if (headerRight && !document.querySelector(".user-profile-display")) {
          const perfilDiv = document.createElement("div");
          perfilDiv.className = "user-profile-display";
          perfilDiv.style.marginRight = "20px";

          headerRight.insertBefore(perfilDiv, headerRight.firstChild);

          // O sistema já vai popular automaticamente
          authSystem.updateUserInterface();
        }
      }

      // Modificar botões de cadastro baseado no usuário logado
      function modificarBotoesCadastro(user) {
        const botoesContainer = document.querySelector(".botoes-cadastro");
        if (botoesContainer) {
          let novosBotoes = "";

          switch (user.type) {
            case "admin":
              novosBotoes = `
                <button class="btn-cadastro" onclick="window.location.href='dashboard.html'">
                  <i class="bi bi-speedometer2"></i> Dashboard Admin
                </button>
                <button class="btn-cadastro" onclick="window.location.href='empregos.html'">
                  <i class="bi bi-briefcase"></i> Gerenciar Vagas
                </button>
                <button class="btn-cadastro" onclick="authSystem.logout()">
                  <i class="bi bi-box-arrow-right"></i> Logout
                </button>
              `;
              break;

            case "empresa":
              novosBotoes = `
                <button class="btn-cadastro" onclick="window.location.href='dashboard.html'">
                  <i class="bi bi-speedometer2"></i> Meu Dashboard
                </button>
                <button class="btn-cadastro" onclick="window.location.href='empregos.html'">
                  <i class="bi bi-plus-circle"></i> Publicar Vaga
                </button>
                <button class="btn-cadastro" onclick="authSystem.logout()">
                  <i class="bi bi-box-arrow-right"></i> Logout
                </button>
              `;
              break;

            case "profissional":
              novosBotoes = `
                <button class="btn-cadastro" onclick="window.location.href='dashboard.html'">
                  <i class="bi bi-speedometer2"></i> Meu Dashboard
                </button>
                <button class="btn-cadastro" onclick="window.location.href='empregos.html'">
                  <i class="bi bi-search"></i> Buscar Vagas
                </button>
                <button class="btn-cadastro" onclick="authSystem.logout()">
                  <i class="bi bi-box-arrow-right"></i> Logout
                </button>
              `;
              break;
          }

          if (novosBotões) {
            botoesContainer.innerHTML = novosBotões;
          }
        }
      }
    </script>
  </body>
</html>
